---
// src/components/blog/BlogCard.astro
export interface Props {
  title: string;
  excerpt: string;
  date: string;
  readTime?: string;
  slug: string;
  image?: string;
  imageAlt?: string;
  tags?: string[];
  category: string;
  author?: {
    name: string;
    avatar?: string;
    role?: string;
  };
  featured?: boolean;
  variant?: "default" | "compact" | "featured";
  className?: string;
}

const {
  title,
  excerpt,
  date,
  readTime,
  slug,
  image,
  imageAlt,
  tags = [],
  category,
  author,
  featured = false,
  variant = "default",
  className = "",
} = Astro.props;
---

<article
  class={`group bg-white dark:bg-zinc-800 rounded-sm border border-zinc-200 dark:border-zinc-700 overflow-hidden hover:shadow-lg transition-all duration-300 ${className}`}
>
  {
    image && (
      <div
        class={`overflow-hidden ${variant === "compact" ? "aspect-video" : "aspect-square"}`}
      >
        <img
          src={image}
          alt={imageAlt || title}
          class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
          loading="lazy"
        />
      </div>
    )
  }

  <div class={`p-${variant === "compact" ? "4" : "6"}`}>
    <!-- Category and Featured Badge -->
    <div class="mb-3 flex items-center gap-2">
      <span
        class="inline-block px-3 py-1 bg-zinc-100 dark:bg-zinc-700 text-zinc-700 dark:text-zinc-300 text-xs font-bold rounded-full uppercase tracking-wider"
      >
        {category}
      </span>
      {
        featured && (
          <span class="inline-block px-2 py-1 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-xs font-bold rounded uppercase tracking-wider">
            FEATURED
          </span>
        )
      }
    </div>

    <!-- Title -->
    <h3
      class={`font-semibold text-zinc-900 dark:text-zinc-100 mb-2 group-hover:text-zinc-700 dark:group-hover:text-zinc-300 transition-colors ${variant === "compact" ? "text-base" : "text-lg"}`}
    >
      <a href={`/blog/${slug}`} class="hover:underline">
        {title}
      </a>
    </h3>

    <!-- Excerpt -->
    <p class="text-sm text-zinc-600 dark:text-zinc-400 mb-4 line-clamp-2">
      {excerpt}
    </p>

    <!-- Tags -->
    {
      tags.length > 0 && (
        <div class="flex flex-wrap gap-2 mb-4">
          {tags.slice(0, 2).map((tag) => (
            <span class="px-2 py-1 bg-zinc-50 dark:bg-zinc-700 text-zinc-600 dark:text-zinc-400 text-xs rounded uppercase tracking-wide">
              #{tag}
            </span>
          ))}
        </div>
      )
    }

    <!-- Meta -->
    <div
      class="flex items-center justify-between text-xs text-zinc-500 dark:text-zinc-400 uppercase tracking-wide"
    >
      <span>{date}</span>
      {readTime && <span>{readTime}</span>}
    </div>

    <!-- Author -->
    {
      author && (
        <div class="mt-4 pt-4 border-t border-zinc-200 dark:border-zinc-700 flex items-center gap-3">
          {author.avatar && (
            <img
              src={author.avatar}
              alt={author.name}
              class="w-8 h-8 rounded-full"
              loading="lazy"
            />
          )}
          <div>
            <div class="text-sm font-medium text-zinc-900 dark:text-zinc-100">
              {author.name}
            </div>
            {author.role && (
              <div class="text-xs text-zinc-500 dark:text-zinc-400 uppercase tracking-wide">
                {author.role}
              </div>
            )}
          </div>
        </div>
      )
    }
  </div>
</article>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
