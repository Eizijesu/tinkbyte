---
// src/components/ui/Footer.astro - FIXED mobile logo visibility
import Logo from "./Logo.astro";
import ThemeToggle from "./ThemeToggle.astro";

const currentYear = new Date().getFullYear();

const navLinks = [
  { text: "ABOUT US", href: "/about" },
  { text: "ARTICLES", href: "/blog" },
  { text: "AUDIO", href: "/audio" },
  { text: "COMMUNITY", href: "/community" },
  { text: "CONTACT", href: "/contact" },
  { text: "NEWSLETTER", href: "/newsletter" },
];

const legalLinks = [
  { text: "PRIVACY POLICY", href: "/legal/privacy-policy" },
  { text: "TERMS OF USE", href: "/legal/terms-of-service" },
  { text: "COOKIES", href: "/legal/cookie-policy" },
  { text: "SITEMAP", href: "/sitemap.xml" },
];

const categoryLinks = [
  { text: "AI EVOLUTION", href: "/blog/categories/ai-evolution" },
  { text: "PRODUCT STRATEGY", href: "/blog/categories/product-strategy" },
  { text: "TECH CULTURE", href: "/blog/categories/tech-culture" },
  { text: "DEVELOPER TOOLS", href: "/blog/categories/developer-tools" },
  { text: "STARTUP INSIGHTS", href: "/blog/categories/startup-insights" },
  { text: "BUILDING THINKING", href: "/blog/categories/building-thinking" },
];

const resourceLinks = [
  { text: "COMMUNITY", href: "/community" },
  { text: "RESEARCH", href: "/research" },
  { text: "PODCAST", href: "/podcast" },
  { text: "ARCHIVE", href: "/archive" },
  { text: "AUTHORS", href: "/blog/authors" },
  { text: "ISSUES", href: "/newsletter/archive" },
];

const socialLinks = [
  {
    name: "Twitter",
    href: "https://twitter.com/tinkbytehq",
    icon: "fab fa-twitter",
  },
  {
    name: "LinkedIn",
    href: "https://linkedin.com/company/tinkbytehq",
    icon: "fab fa-linkedin",
  },
  {
    name: "YouTube",
    href: "https://youtube.com/@tinkbytehq",
    icon: "fab fa-youtube",
  },
  {
    name: "Instagram",
    href: "https://instagram.com/tinkbytehq",
    icon: "fab fa-instagram",
  },
  { name: "RSS", href: "/rss.xml", icon: "fas fa-rss" },
];

const contactInfo = {
  email: "feedback@tinkbyte.com",
};
---

<footer class="footer-enhanced">
  <!-- Newsletter Section - Mobile Optimized -->
  <div class="newsletter-section-enhanced">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 py-12">
      <!-- Mobile-First Layout -->
      <div class="mobile-newsletter-header">
        <div class="mobile-logo-subscribe">
          <!-- FIXED: Mobile logo with explicit light mode visibility -->
          <div class="mobile-footer-logo-container">
            <Logo size="default" className="mobile-footer-logo-light" />
          </div>
          <a href="/subscribe" class="mobile-footer-subscribe-cta">
            SUBSCRIBE
          </a>
        </div>
      </div>

      <!-- Desktop Newsletter Content -->
      <div class="desktop-newsletter-content">
        <div class="text-center mb-8">
          <h3 class="text-2xl font-bold text-white mb-4">
            Stay Updated with TinkByte
          </h3>
          <p class="text-gray-300 max-w-2xl mx-auto">
            Get the latest insights, tutorials, and industry analysis delivered
            to your inbox. No spam, just valuable content for builders.
          </p>
        </div>

        <!-- Newsletter Form with proper button visibility -->
        <div class="newsletter-form-container">
          <form class="newsletter-form" data-newsletter="true">
            <div class="form-group">
              <input
                type="email"
                name="email"
                placeholder="Enter your email address"
                required
                class="newsletter-email-input"
                aria-label="Email address for newsletter"
              />
              <button
                type="submit"
                class="newsletter-submit-button"
                data-original-text="SUBSCRIBE"
              >
                <span class="button-text">SUBSCRIBE</span>
                <span class="button-icon">→</span>
              </button>
            </div>

            <div
              class="form-status"
              id="newsletter-status"
              style="display: none;"
            >
              <div class="status-message"></div>
            </div>

            <p class="newsletter-disclaimer">
              Join 1,200+ product builders • No spam • Unsubscribe anytime
            </p>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Footer Content -->
  <div class="main-footer-content">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 py-16">
      <!-- Top Section -->
      <div class="footer-grid">
        <!-- Brand & Contact -->
        <div class="brand-section">
          <div class="mb-6 desktop-only">
            <Logo size="default" className="text-white" />
          </div>
          <p class="footer-description">
            Cutting through the noise with substance-driven tech insights. Real
            knowledge for builders who value depth.
          </p>

          <!-- Contact Information -->
          <div class="contact-section">
            <h4 class="footer-section-title">Contact Us</h4>
            <div class="contact-info">
              <a href={`mailto:${contactInfo.email}`} class="contact-link">
                <i
                  class="fas fa-envelope contact-icon"
                  style="font-family: 'Font Awesome 6 Free' !important; font-weight: 900 !important;"
                ></i>
                <span class="contact-text">{contactInfo.email}</span>
              </a>
            </div>
          </div>

          <!-- Social Links with Theme Toggle -->
          <div class="social-links">
            {
              socialLinks.map((social) => (
                <a
                  href={social.href}
                  class="social-link"
                  aria-label={`Follow TinkByte on ${social.name}`}
                  target={social.name !== "RSS" ? "_blank" : undefined}
                  rel={
                    social.name !== "RSS" ? "noopener noreferrer" : undefined
                  }
                >
                  <i
                    class={social.icon + " social-icon"}
                    style={
                      social.name === "RSS"
                        ? "font-family: 'Font Awesome 6 Free' !important; font-weight: 900 !important;"
                        : "font-family: 'Font Awesome 6 Brands' !important; font-weight: 400 !important;"
                    }
                  />
                </a>
              ))
            }

            <!-- Theme Toggle positioned as another social icon -->
            <div class="theme-toggle-wrapper">
              <ThemeToggle />
            </div>
          </div>
        </div>

        <!-- Navigation -->
        <div class="footer-column">
          <h3 class="footer-section-title">Navigation</h3>
          <ul class="footer-links">
            {
              navLinks.map((link) => (
                <li>
                  <a href={link.href} class="footer-link">
                    <span class="footer-link-text">{link.text}</span>
                  </a>
                </li>
              ))
            }
          </ul>
        </div>

        <!-- Categories -->
        <div class="footer-column">
          <h3 class="footer-section-title">Categories</h3>
          <div class="footer-links">
            {
              categoryLinks.map((category) => (
                <a href={category.href} class="footer-link footer-link-block">
                  {category.text}
                </a>
              ))
            }
          </div>
        </div>

        <!-- Resources -->
        <div class="footer-column">
          <h3 class="footer-section-title">Resources</h3>
          <div class="footer-links">
            {
              resourceLinks.map((resource) => (
                <a href={resource.href} class="footer-link footer-link-block">
                  {resource.text}
                </a>
              ))
            }
          </div>
        </div>

        <!-- Legal -->
        <div class="footer-column">
          <h3 class="footer-section-title">Legal</h3>
          <ul class="footer-links">
            {
              legalLinks.map((link) => (
                <li>
                  <a href={link.href} class="footer-link">
                    {link.text}
                  </a>
                </li>
              ))
            }
          </ul>
        </div>
      </div>

      <!-- Bottom Bar -->
      <div class="footer-bottom">
        <div class="footer-bottom-content">
          <div class="copyright-section">
            <p class="copyright-text">
              &copy; {currentYear} TinkByte. All rights reserved.
            </p>
          </div>

          <div class="made-with-section">
            <span class="made-with-text">Made with</span>
            <i
              class="fas fa-heart heart-icon"
              style="font-family: 'Font Awesome 6 Free' !important; font-weight: 900 !important;"
            ></i>
            <span class="made-with-text">from TinkByte</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

<style>
  /* CSS Custom Properties for Perfect Square Design */
  :root {
    --tinkbyte-radius: 0px;
    --tinkbyte-radius-sm: 0px;
    --tinkbyte-radius-md: 0px;
    --tinkbyte-radius-lg: 0px;
    --tinkbyte-radius-card: 0px;
    --tinkbyte-radius-button: 0px;
  }

  /* TinkByte Brand Colors & Enhanced Footer */
  .footer-enhanced {
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
    color: #e2e8f0;
    font-family: "Space Grotesk", sans-serif;
    position: relative;
    overflow: hidden;
  }

  .footer-enhanced::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, #243788, transparent);
    opacity: 0.5;
  }

  /* Mobile-First Newsletter Section */
  .newsletter-section-enhanced {
    background: linear-gradient(135deg, #243788 0%, #1e2f6b 100%);
    border-bottom: 2px solid #243788;
  }

  /* Mobile Newsletter Header */
  .mobile-newsletter-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }

  .mobile-logo-subscribe {
    display: flex;
    align-items: center;
    gap: 1rem;
    width: 100%;
    justify-content: space-between;
  }

  /* FIXED: Mobile Footer Logo Container with explicit light mode visibility */
  .mobile-footer-logo-container {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .mobile-footer-logo-light {
    color: white !important;
    fill: white !important;
  }

  /* Force logo visibility in light mode on mobile */
  .mobile-footer-logo-light :global(svg) {
    color: white !important;
    fill: white !important;
  }

  .mobile-footer-logo-light :global(path) {
    fill: white !important;
    color: white !important;
  }

  .mobile-footer-logo-light :global(.logo-text) {
    color: white !important;
    fill: white !important;
  }

  /* Ensure all logo elements are white on mobile */
  .mobile-footer-logo-container :global(*) {
    color: white !important;
    fill: white !important;
  }

  /* Mobile Subscribe CTA - FIXED CENTERING */
  .mobile-footer-subscribe-cta {
    font-family: "Space Grotesk", sans-serif;
    background: white;
    color: #243788;
    text-decoration: none;
    padding: 0.75rem 1.5rem;
    border: 2px solid white;
    border-radius: var(--tinkbyte-radius-button);
    font-size: 0.875rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    min-width: 120px;
  }

  .mobile-footer-subscribe-cta:hover {
    background: transparent;
    color: white;
    transform: translateY(-1px);
  }

  /* Desktop Newsletter Content */
  .desktop-newsletter-content {
    display: block;
  }

  /* Mobile-First Responsive Design */
  @media (max-width: 768px) {
    .mobile-newsletter-header {
      display: flex;
    }

    .desktop-newsletter-content {
      display: none;
    }

    .newsletter-section-enhanced .max-w-7xl {
      padding: 1.5rem 1rem;
    }

    /* Enhanced mobile logo visibility */
    .mobile-footer-logo-container {
      background: rgba(255, 255, 255, 0.1);
      padding: 0.5rem;
      border-radius: var(--tinkbyte-radius-sm);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
  }

  @media (min-width: 769px) {
    .mobile-newsletter-header {
      display: none;
    }

    .desktop-newsletter-content {
      display: block;
    }
  }

  /* Desktop/Mobile Visibility Classes */
  .desktop-only {
    display: block;
  }

  .mobile-only {
    display: none;
  }

  @media (max-width: 768px) {
    .desktop-only {
      display: none !important;
    }

    .mobile-only {
      display: block;
    }
  }

  .newsletter-section-enhanced h3 {
    font-family: "Space Grotesk", sans-serif;
    color: white;
    font-weight: 800;
  }

  .newsletter-section-enhanced p {
    color: #b4bce1;
    font-family: "Space Grotesk", sans-serif;
  }

  /* Newsletter Form Container */
  .newsletter-form-container {
    max-width: 500px;
    margin: 0 auto;
  }

  .newsletter-form {
    width: 100%;
  }

  .form-group {
    display: flex;
    gap: 0.75rem;
    width: 100%;
    margin-bottom: 1rem;
  }

  /* Newsletter Email Input */
  .newsletter-email-input {
    font-family: "Space Grotesk", sans-serif;
    flex: 1;
    padding: 1rem 1.25rem;
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: var(--tinkbyte-radius-button);
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }

  .newsletter-email-input::placeholder {
    color: rgba(255, 255, 255, 0.7);
    font-weight: 400;
  }

  .newsletter-email-input:focus {
    outline: none;
    border-color: #b4bce1;
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 0 0 3px rgba(180, 188, 225, 0.2);
  }

  /* Newsletter Submit Button - FIXED CENTERING */
  .newsletter-submit-button {
    font-family: "Space Grotesk", sans-serif;
    padding: 1rem 2rem;
    background: white !important;
    color: #243788 !important;
    border: 2px solid white !important;
    border-radius: var(--tinkbyte-radius-button);
    font-size: 0.875rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    min-width: 140px;
    display: flex !important;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    text-align: center;
    opacity: 1 !important;
    visibility: visible !important;
  }

  .newsletter-submit-button::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(36, 55, 136, 0.1),
      transparent
    );
    transition: left 0.5s ease;
  }

  .newsletter-submit-button:hover::before {
    left: 100%;
  }

  .newsletter-submit-button:hover {
    background: #f8fafc !important;
    color: #1e2f6b !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3);
  }

  .newsletter-submit-button:focus {
    outline: 3px solid #b4bce1;
    outline-offset: 2px;
  }

  /* Button States - FIXED with proper visibility */
  .newsletter-submit-button.loading {
    background: #6b7280 !important;
    color: white !important;
    border-color: #6b7280 !important;
    opacity: 1 !important;
    visibility: visible !important;
  }

  .newsletter-submit-button.success {
    background: #059669 !important;
    color: white !important;
    border-color: #059669 !important;
    opacity: 1 !important;
    visibility: visible !important;
  }

  .newsletter-submit-button.error {
    background: #dc2626 !important;
    color: white !important;
    border-color: #dc2626 !important;
    opacity: 1 !important;
    visibility: visible !important;
  }

  /* Button Text and Icon - CENTERED */
  .button-text {
    position: relative;
    z-index: 2;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .button-icon {
    position: relative;
    z-index: 2;
    font-size: 1rem;
    transition: transform 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .newsletter-submit-button:hover .button-icon {
    transform: translateX(2px);
  }

  /* Form Status */
  .form-status {
    margin-top: 1rem;
    padding: 0.75rem 1rem;
    border-radius: var(--tinkbyte-radius-button);
    text-align: center;
    font-family: "Space Grotesk", sans-serif;
    font-weight: 500;
    font-size: 0.875rem;
  }

  .form-status.success {
    background: rgba(5, 150, 105, 0.1);
    color: #10b981;
    border: 1px solid #10b981;
  }

  .form-status.error {
    background: rgba(220, 38, 38, 0.1);
    color: #ef4444;
    border: 1px solid #ef4444;
  }

  /* Newsletter Disclaimer */
  .newsletter-disclaimer {
    font-size: 0.75rem;
    color: rgba(180, 188, 225, 0.8);
    text-align: center;
    margin: 0;
    font-weight: 400;
    line-height: 1.4;
  }

  /* Main Footer Content */
  .main-footer-content {
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
  }

  /* Footer Grid */
  .footer-grid {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
    gap: 3rem;
    margin-bottom: 3rem;
  }

  @media (max-width: 1024px) {
    .footer-grid {
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
    }

    .brand-section {
      grid-column: span 2;
    }
  }

  @media (max-width: 768px) {
    .footer-grid {
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    .brand-section {
      grid-column: span 1;
    }

    .form-group {
      flex-direction: column;
      gap: 1rem;
    }

    .newsletter-submit-button {
      width: 100%;
      padding: 1.25rem 2rem;
    }
  }

  /* Brand Section */
  .brand-section {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .footer-description {
    color: #94a3b8;
    line-height: 1.6;
    margin-bottom: 1rem;
    font-family: "Space Grotesk", sans-serif;
  }

  /* Contact Section */
  .contact-section {
    margin-bottom: 1.5rem;
  }

  .contact-info {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .contact-link {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    color: #94a3b8;
    text-decoration: none;
    transition: all 0.3s ease;
    padding: 0.5rem 0;
    font-family: "Space Grotesk", sans-serif;
  }

  .contact-link:hover {
    color: #243788;
    transform: translateX(4px);
  }

  .contact-icon {
    color: #243788;
    font-size: 1rem;
    width: 1.25rem;
    flex-shrink: 0;
  }

  .contact-text {
    font-size: 0.875rem;
  }

  /* Social Links with Theme Toggle - FIXED MOBILE SPACING */
  .social-links {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
    align-items: center;
  }

  .social-link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.25rem;
    height: 2.25rem;
    background: #1e293b;
    color: #94a3b8;
    text-decoration: none;
    transition: all 0.3s ease;
    border: 1px solid #334155;
    border-radius: var(--tinkbyte-radius-button);
    position: relative;
    overflow: hidden;
  }

  .social-link::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(36, 55, 136, 0.2),
      transparent
    );
    transition: left 0.5s ease;
  }

  .social-link:hover::before {
    left: 100%;
  }

  .social-link:hover {
    background: #243788;
    color: white;
    transform: translateY(-2px);
    border-color: #243788;
    box-shadow: 0 4px 12px rgba(36, 55, 136, 0.3);
  }

  .social-icon {
    font-size: 1rem;
    position: relative;
    z-index: 1;
  }

  /* Theme Toggle Wrapper - FIXED SIZE */
  .theme-toggle-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Override theme toggle styles to match social icons - FIXED SIZE */
  .theme-toggle-wrapper :global(.theme-toggle) {
    width: 2.25rem;
    height: 2.25rem;
    background: #1e293b;
    color: #94a3b8;
    border: 1px solid #334155;
    border-radius: var(--tinkbyte-radius-button);
    padding: 0;
    position: relative;
    overflow: hidden;
  }

  .theme-toggle-wrapper :global(.theme-toggle svg) {
    width: 1rem;
    height: 1rem;
  }

  .theme-toggle-wrapper :global(.theme-toggle::before) {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(36, 55, 136, 0.2),
      transparent
    );
    transition: left 0.5s ease;
  }

  .theme-toggle-wrapper :global(.theme-toggle:hover::before) {
    left: 100%;
  }

  .theme-toggle-wrapper :global(.theme-toggle:hover) {
    background: #243788;
    color: white;
    transform: translateY(-2px);
    border-color: #243788;
    box-shadow: 0 4px 12px rgba(36, 55, 136, 0.3);
  }

  /* Footer Columns */
  .footer-column {
    display: flex;
    flex-direction: column;
  }

  .footer-section-title {
    font-family: "Space Grotesk", sans-serif;
    font-size: 0.875rem;
    font-weight: 600;
    color: white;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 1.5rem;
    position: relative;
    padding-bottom: 0.5rem;
  }

  .footer-section-title::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 2rem;
    height: 2px;
    background: #243788;
    border-radius: var(--tinkbyte-radius-sm);
  }

  /* Footer Links */
  .footer-links {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .footer-link {
    color: #94a3b8;
    text-decoration: none;
    font-size: 0.875rem;
    font-family: "Space Grotesk", sans-serif;
    text-transform: uppercase;
    letter-spacing: 0.025em;
    transition: all 0.3s ease;
    position: relative;
    padding: 0.25rem 0;
    border-left: 3px solid transparent;
    padding-left: 0.75rem;
    border-radius: var(--tinkbyte-radius-sm);
  }

  .footer-link:hover {
    color: #b4bce1;
    border-left-color: #b4bce1;
    transform: translateX(4px);
  }

  .footer-link-block {
    display: block;
  }

  .footer-link-text {
    position: relative;
  }

  .footer-link-text::after {
    content: "";
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 1px;
    background: #243788;
    transition: width 0.3s ease;
  }

  .footer-link:hover .footer-link-text::after {
    width: 100%;
  }

  /* Footer Bottom */
  .footer-bottom {
    padding-top: 2rem;
    border-top: 1px solid #334155;
  }

  .footer-bottom-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    text-align: center;
  }

  @media (min-width: 768px) {
    .footer-bottom-content {
      flex-direction: row;
      justify-content: space-between;
      text-align: left;
    }
  }

  .copyright-text {
    color: #64748b;
    font-size: 0.875rem;
    font-family: "Space Grotesk", sans-serif;
    text-transform: uppercase;
    letter-spacing: 0.025em;
    margin: 0;
  }

  .made-with-section {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .made-with-text {
    color: #64748b;
    font-size: 0.875rem;
    font-family: "Space Grotesk", sans-serif;
    text-transform: uppercase;
    letter-spacing: 0.025em;
  }

  .heart-icon {
    color: #243788;
    font-size: 0.875rem;
    animation: heartbeat 2s infinite;
  }

  @keyframes heartbeat {
    0%,
    50%,
    100% {
      transform: scale(1);
    }
    25%,
    75% {
      transform: scale(1.1);
    }
  }

  /* Mobile Responsiveness */
  @media (max-width: 640px) {
    .social-links {
      justify-content: center;
      gap: 0.5rem;
    }

    .social-link {
      width: 2rem;
      height: 2rem;
    }

    .social-icon {
      font-size: 0.875rem;
    }

    .theme-toggle-wrapper :global(.theme-toggle) {
      width: 2rem;
      height: 2rem;
    }

    .theme-toggle-wrapper :global(.theme-toggle svg) {
      width: 0.875rem;
      height: 0.875rem;
    }

    .mobile-logo-subscribe {
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
      text-align: center;
    }

    .mobile-footer-subscribe-cta {
      width: 100%;
      padding: 0.875rem 1rem;
      font-size: 0.8125rem;
    }

    /* Enhanced mobile logo container */
    .mobile-footer-logo-container {
      padding: 0.75rem;
      background: rgba(255, 255, 255, 0.15);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: var(--tinkbyte-radius-button);
    }
  }

  /* Force visibility for all button states */
  .newsletter-submit-button,
  .newsletter-submit-button.loading,
  .newsletter-submit-button.success,
  .newsletter-submit-button.error {
    display: flex !important;
    opacity: 1 !important;
    visibility: visible !important;
    align-items: center !important;
    justify-content: center !important;
    text-align: center !important;
  }

  /* Accessibility */
  @media (prefers-reduced-motion: reduce) {
    .footer-link,
    .social-link,
    .contact-link,
    .heart-icon,
    .newsletter-submit-button,
    .newsletter-submit-button::before {
      transition: none;
      animation: none;
      transform: none;
    }

    .footer-link:hover,
    .social-link:hover,
    .contact-link:hover,
    .newsletter-submit-button:hover {
      transform: none;
    }
  }

  /* Focus styles */
  .footer-link:focus,
  .social-link:focus,
  .contact-link:focus,
  .newsletter-email-input:focus,
  .newsletter-submit-button:focus,
  .mobile-footer-subscribe-cta:focus {
    outline: 2px solid #243788;
    outline-offset: 2px;
  }

  /* Loading animation for icons */
  .icon-loading {
    animation: pulse 1.5s infinite;
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.6;
    }
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Fix footer icons with proper TypeScript casting
    const footerIcons = document.querySelectorAll(
      "footer .fa, footer .fas, footer .far, footer .fab"
    ) as NodeListOf<HTMLElement>;

    footerIcons.forEach(function (icon) {
      icon.classList.add("icon-loading");

      if (icon.classList.contains("fab")) {
        icon.style.setProperty(
          "font-family",
          '"Font Awesome 6 Brands"',
          "important"
        );
        icon.style.setProperty("font-weight", "400", "important");
      } else if (
        icon.classList.contains("fas") ||
        icon.classList.contains("fa")
      ) {
        icon.style.setProperty(
          "font-family",
          '"Font Awesome 6 Free"',
          "important"
        );
        icon.style.setProperty("font-weight", "900", "important");
      }

      setTimeout(() => {
        icon.classList.remove("icon-loading");
      }, 100);
    });

    // Enhanced newsletter form handling with proper button visibility
    const newsletterForms = document.querySelectorAll(
      '[data-newsletter="true"]'
    ) as NodeListOf<HTMLFormElement>;

    newsletterForms.forEach((form) => {
      form.addEventListener("submit", async function (e) {
        e.preventDefault();

        const formData = new FormData(this);
        const email = formData.get("email") as string;
        const button = this.querySelector(
          ".newsletter-submit-button"
        ) as HTMLButtonElement;
        const buttonText = button.querySelector(".button-text") as HTMLElement;
        const statusDiv = document.getElementById(
          "newsletter-status"
        ) as HTMLElement;
        const statusMessage = statusDiv.querySelector(
          ".status-message"
        ) as HTMLElement;

        if (!email || !button || !buttonText) return;

        // Store original state
        const originalText = buttonText.textContent;
        const originalClasses = button.className;

        try {
          // Loading state - FORCE VISIBILITY AND CENTERING
          button.className = originalClasses + " loading";
          button.style.display = "flex";
          button.style.alignItems = "center";
          button.style.justifyContent = "center";
          button.style.textAlign = "center";
          button.style.opacity = "1";
          button.style.visibility = "visible";
          buttonText.textContent = "SUBSCRIBING...";
          button.disabled = true;

          // Hide previous status
          statusDiv.style.display = "none";
          statusDiv.className = "form-status";

          // Simulate API call (replace with your actual newsletter service)
          await new Promise((resolve) => setTimeout(resolve, 1500));

          // Success state - FORCE VISIBILITY AND CENTERING
          button.className = originalClasses + " success";
          button.style.display = "flex";
          button.style.alignItems = "center";
          button.style.justifyContent = "center";
          button.style.textAlign = "center";
          button.style.opacity = "1";
          button.style.visibility = "visible";
          buttonText.textContent = "SUBSCRIBED!";

          // Show success status
          statusDiv.className = "form-status success";
          statusMessage.textContent =
            "✓ Successfully subscribed! Check your email for confirmation.";
          statusDiv.style.display = "block";

          // Reset form
          this.reset();

          // Reset button after delay - MAINTAIN VISIBILITY AND CENTERING
          setTimeout(() => {
            button.className = originalClasses;
            button.style.display = "flex";
            button.style.alignItems = "center";
            button.style.justifyContent = "center";
            button.style.textAlign = "center";
            button.style.opacity = "1";
            button.style.visibility = "visible";
            if (originalText) {
              buttonText.textContent = originalText;
            }
            button.disabled = false;

            // Hide status after longer delay
            setTimeout(() => {
              statusDiv.style.display = "none";
            }, 3000);
          }, 3000);
        } catch (error) {
          console.error("Newsletter signup failed:", error);

          // Error state - FORCE VISIBILITY AND CENTERING
          button.className = originalClasses + " error";
          button.style.display = "flex";
          button.style.alignItems = "center";
          button.style.justifyContent = "center";
          button.style.textAlign = "center";
          button.style.opacity = "1";
          button.style.visibility = "visible";
          buttonText.textContent = "ERROR - TRY AGAIN";

          // Show error status
          statusDiv.className = "form-status error";
          statusMessage.textContent =
            "✗ Subscription failed. Please try again.";
          statusDiv.style.display = "block";

          // Reset button after delay - MAINTAIN VISIBILITY AND CENTERING
          setTimeout(() => {
            button.className = originalClasses;
            button.style.display = "flex";
            button.style.alignItems = "center";
            button.style.justifyContent = "center";
            button.style.textAlign = "center";
            button.style.opacity = "1";
            button.style.visibility = "visible";
            if (originalText) {
              buttonText.textContent = originalText;
            }
            button.disabled = false;

            // Hide status after delay
            setTimeout(() => {
              statusDiv.style.display = "none";
            }, 5000);
          }, 3000);
        }
      });
    });

    // Smooth scroll for internal footer links
    const footerLinks = document.querySelectorAll(
      'footer a[href^="#"]'
    ) as NodeListOf<HTMLAnchorElement>;
    footerLinks.forEach((link) => {
      link.addEventListener("click", function (e) {
        e.preventDefault();
        const targetId = this.getAttribute("href")?.substring(1);
        const targetElement = document.getElementById(targetId || "");

        if (targetElement) {
          targetElement.scrollIntoView({
            behavior: "smooth",
            block: "start",
          });
        }
      });
    });

    // Add intersection observer for footer animations
    const footerElements = document.querySelectorAll(
      ".footer-column, .brand-section"
    ) as NodeListOf<HTMLElement>;

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("animate-in");
          }
        });
      },
      {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px",
      }
    );

    footerElements.forEach((element) => {
      observer.observe(element);
    });
  });
</script>
