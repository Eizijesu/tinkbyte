---
// src/pages/admin/index.astro - FIXED VERSION
import { adminAuthManager } from "../../lib/admin/auth.js";

// Initialize admin auth
await adminAuthManager.initialize();

// Check admin status
const user = await adminAuthManager.getCurrentUser();

console.log("Admin index check:", {
  hasUser: !!user,
  userEmail: user?.email,
});

if (!user) {
  console.log("No admin user, redirecting to signin");
  return Astro.redirect("/auth/admin-signin");
}

console.log("Admin verified, redirecting to dashboard");
return Astro.redirect("/admin/dashboard");
---
