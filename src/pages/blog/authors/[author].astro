---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import AuthorBio from "../../components/blog/AuthorBio.astro";

export async function getStaticPaths() {
  const authors = await getCollection("authors");
  return authors.map((author) => ({
    params: { author: author.slug },
    props: { author },
  }));
}

const { author } = Astro.props;
---

<BaseLayout>
  <div class="max-w-3xl mx-auto px-4 sm:px-6 py-16">
    <AuthorBio author={author} />

    <h2 class="text-2xl font-bold mt-12 mb-8">Recent Articles</h2>
    <div class="space-y-6">
      {
        (await getCollection("blog"))
          .filter((post) => post.data.author === author.slug)
          .map((post) => (
            <a href={`/blog/${post.slug}`} class="block group">
              <h3 class="text-lg font-semibold group-hover:text-primary transition">
                {post.data.title}
              </h3>
              <p class="text-sm text-zinc-600 dark:text-zinc-400 mt-1">
                {post.data.pubDate.toLocaleDateString()}
              </p>
            </a>
          ))
      }
    </div>
  </div>
</BaseLayout>